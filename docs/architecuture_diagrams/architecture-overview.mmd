flowchart TD

    subgraph ClientApps[Client / Application Layer]
        A1[Secure Chat UI]
        A2[IoT Device / Sensor]
        A3[Admin Console]
    end
    
    subgraph Core[Open Federated Defense Core]
        L1[Layer 1: PQ-Secure Transport]
        L2[Layer 2: DID Identity & VC]
        L3[Layer 3: Session & Key Rotation]
        L4[Layer 4: Encrypted Messaging]
        L5[Layer 5: AI & Rule-based Defense]
        L6[Layer 6: Federation & MCP Connectors]
    end
    
    subgraph External[External Platforms]
        E1[Slack]
        E2[Microsoft Teams]
        E3[WeChat]
        E4[WhatsApp]
    end
    
    A1 --> L4
    A2 --> L1
    A3 --> L5
    
    L1 --> L2 --> L3 --> L4 --> L5 --> L6
    L6 --> E1
    L6 --> E2
    L6 --> E3
    L6 --> E4